[‚úì] Pulling schema from database...
[‚úì] Changes applied
npm notice
npm notice New major version of npm available! 10.8.2 -> 11.5.2
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.5.2
npm notice To update run: npm install -g npm@11.5.2
npm notice
root@ubuntu:~/Grema# git pull
remote: Enumerating objects: 8, done.
remote: Counting objects: 100% (8/8), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 5 (delta 3), reused 5 (delta 3), pack-reused 0 (from 0)
Unpacking objects: 100% (5/5), 3.08 KiB | 3.08 MiB/s, done.
From https://github.com/zeeeero43/Grema
   d6c6b9c..c0eaa65  main       -> origin/main
Updating d6c6b9c..c0eaa65
Fast-forward
 DEPLOYMENT.md                                      |   5 +-
 ...app-Built-0-0s--1754997654650_1754997654650.txt | 162 +++++++++++++++++++++
 2 files changed, 166 insertions(+), 1 deletion(-)
 create mode 100644 attached_assets/Pasted--Running-5-5-grema-app-Built-0-0s--1754997654650_1754997654650.txt
root@ubuntu:~/Grema# docker-compose exec app npm run db:push
WARN[0000] /root/Grema/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion

> rest-express@1.0.0 db:push
> drizzle-kit push

No config path provided, using default 'drizzle.config.ts'
Reading config file '/app/drizzle.config.ts'
Using 'pg' driver for database querying
[‚úì] Pulling schema from database...
[i] No changes detected
root@ubuntu:~/Grema# docker-compose logs -f
WARN[0000] /root/Grema/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion
nginx-1  | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx-1  | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx-1  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx-1  | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx-1  | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx-1  | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx-1  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx-1  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx-1  | /docker-entrypoint.sh: Configuration complete; ready for start up
nginx-1  | 94.31.69.45 - - [12/Aug/2025:11:20:24 +0000] "GET / HTTP/1.1" 200 637 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
nginx-1  | 94.31.69.45 - - [12/Aug/2025:11:20:24 +0000] "GET /Grema/assets/index-B4E_xV4-.js HTTP/1.1" 200 637 "http://212.227.103.141/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
nginx-1  | 94.31.69.45 - - [12/Aug/2025:11:20:24 +0000] "GET /Grema/assets/index-CdFCd3Jz.css HTTP/1.1" 200 637 "http://212.227.103.141/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
nginx-1  | 94.31.69.45 - - [12/Aug/2025:11:20:24 +0000] "GET /favicon.ico HTTP/1.1" 200 637 "http://212.227.103.141/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
nginx-1  | 94.31.69.45 - - [12/Aug/2025:11:20:26 +0000] "GET / HTTP/1.1" 304 0 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
nginx-1  | 94.31.69.45 - - [12/Aug/2025:11:21:10 +0000] "GET / HTTP/1.1" 304 0 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
nginx-1  | 94.31.69.45 - - [12/Aug/2025:11:21:25 +0000] "GET / HTTP/1.1" 304 0 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
nginx-1  | 94.31.69.45 - - [12/Aug/2025:11:21:26 +0000] "GET / HTTP/1.1" 304 0 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
nginx-1  | 94.31.69.45 - - [12/Aug/2025:11:22:03 +0000] "GET / HTTP/1.1" 304 0 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"
db-1     |
app-1    | üöÄ Initializing automated blog system...
app-1    | üöÄ Starting automated blog scheduler...
app-1    | ‚è∞ Will generate blog posts every ~80 hours (with random variation)
db-1     | PostgreSQL Database directory appears to contain a database; Skipping initialization
db-1     |
db-1     | 2025-08-12 11:19:43.409 UTC [1] LOG:  starting PostgreSQL 15.13 on x86_64-pc-linux-musl, compiled by gcc (Alpine 14.2.0) 14.2.0, 64-bit
db-1     | 2025-08-12 11:19:43.409 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
db-1     | 2025-08-12 11:19:43.409 UTC [1] LOG:  listening on IPv6 address "::", port 5432
db-1     | 2025-08-12 11:19:43.410 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
db-1     | 2025-08-12 11:19:43.413 UTC [30] LOG:  database system was shut down at 2025-08-12 11:18:58 UTC
db-1     | 2025-08-12 11:19:43.417 UTC [1] LOG:  database system is ready to accept connections
db-1     | 2025-08-12 11:20:14.587 UTC [42] ERROR:  relation "blog_ideas" does not exist at character 76
app-1    | üå± Initializing dynamic blog topic system...
app-1    | ‚ùå Failed to initialize dynamic topic system: error: relation "blog_ideas" does not exist
app-1    |     at /app/node_modules/pg-pool/index.js:45:11
app-1    |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
app-1    |     at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
app-1    |     at async DatabaseStorage.getUnusedBlogIdeas (file:///app/dist/index.js:293:12)
db-1     | 2025-08-12 11:20:14.587 UTC [42] STATEMENT:  select "id", "topic", "category", "keywords", "is_used", "created_at" from "blog_ideas" where "blog_ideas"."is_used" = $1 order by "blog_ideas"."created_at" desc limit $2
db-1     | 2025-08-12 11:20:14.629 UTC [43] ERROR:  relation "blog_ideas" does not exist at character 76
db-1     | 2025-08-12 11:20:14.629 UTC [43] STATEMENT:  select "id", "topic", "category", "keywords", "is_used", "created_at" from "blog_ideas" where "blog_ideas"."is_used" = $1 order by "blog_ideas"."created_at" desc limit $2
db-1     | 2025-08-12 11:20:14.640 UTC [44] ERROR:  relation "ai_generation_logs" does not exist at character 13
db-1     | 2025-08-12 11:20:14.640 UTC [44] STATEMENT:  insert into "ai_generation_logs" ("id", "type", "prompt", "response", "model", "success", "error", "created_at") values (default, $1, $2, $3, $4, $5, $6, default) returning "id", "type", "prompt", "response", "model", "success", "error", "created_at"
app-1    |     at async TopicGenerationService.ensureTopicAvailability (file:///app/dist/index.js:757:26)
app-1    |     at async BlogAutomationService.initializeBlogIdeas (file:///app/dist/index.js:786:7)
app-1    |     at async BlogScheduler.start (file:///app/dist/index.js:971:7)
app-1    |     at async registerRoutes (file:///app/dist/index.js:1385:5)
app-1    |     at async file:///app/dist/index.js:1428:18 {
app-1    |   length: 109,
app-1    |   severity: 'ERROR',
app-1    |   code: '42P01',
app-1    |   detail: undefined,
app-1    |   hint: undefined,
app-1    |   position: '76',
app-1    |   internalPosition: undefined,
app-1    |   internalQuery: undefined,
app-1    |   where: undefined,
app-1    |   schema: undefined,
app-1    |   table: undefined,
app-1    |   column: undefined,
app-1    |   dataType: undefined,
app-1    |   constraint: undefined,
app-1    |   file: 'parse_relation.c',
app-1    |   line: '1392',
app-1    |   routine: 'parserOpenTable'
app-1    | }
app-1    | ‚ùå Failed to initialize blog topics: error: relation "blog_ideas" does not exist
app-1    |     at /app/node_modules/pg-pool/index.js:45:11
app-1    |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
app-1    |     at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
app-1    |     at async DatabaseStorage.getUnusedBlogIdeas (file:///app/dist/index.js:293:12)
app-1    |     at async TopicGenerationService.ensureTopicAvailability (file:///app/dist/index.js:757:26)
app-1    |     at async BlogAutomationService.initializeBlogIdeas (file:///app/dist/index.js:786:7)
app-1    |     at async BlogScheduler.start (file:///app/dist/index.js:971:7)
app-1    |     at async registerRoutes (file:///app/dist/index.js:1385:5)
app-1    |     at async file:///app/dist/index.js:1428:18 {
app-1    |   length: 109,
app-1    |   severity: 'ERROR',
app-1    |   code: '42P01',
app-1    |   detail: undefined,
app-1    |   hint: undefined,
app-1    |   position: '76',
app-1    |   internalPosition: undefined,
app-1    |   internalQuery: undefined,
app-1    |   where: undefined,
app-1    |   schema: undefined,
app-1    |   table: undefined,
app-1    |   column: undefined,
app-1    |   dataType: undefined,
app-1    |   constraint: undefined,
app-1    |   file: 'parse_relation.c',
app-1    |   line: '1392',
app-1    |   routine: 'parserOpenTable'
app-1    | }
app-1    | üîÑ Scheduled blog generation starting...
app-1    | ü§ñ Starting automated blog post generation...
app-1    | üéØ Next blog generation in 81.0 hours
app-1    | ‚úÖ Blog scheduler started successfully
app-1    | ‚úÖ Blog automation scheduler started successfully
app-1    | 11:20:14 AM [express] serving on port 5000
app-1    | ‚ùå Blog generation failed: error: relation "blog_ideas" does not exist
app-1    |     at /app/node_modules/pg-pool/index.js:45:11
app-1    |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
app-1    |     at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
app-1    |     at async DatabaseStorage.getUnusedBlogIdeas (file:///app/dist/index.js:293:12)
app-1    |     at async TopicGenerationService.ensureTopicAvailability (file:///app/dist/index.js:757:26)
app-1    |     at async BlogAutomationService.generateBlogPost (file:///app/dist/index.js:800:7)
app-1    |     at async BlogScheduler.generatePostSafely (file:///app/dist/index.js:1012:22) {
app-1    |   length: 109,
app-1    |   severity: 'ERROR',
app-1    |   code: '42P01',
app-1    |   detail: undefined,
app-1    |   hint: undefined,
app-1    |   position: '76',
app-1    |   internalPosition: undefined,
app-1    |   internalQuery: undefined,
app-1    |   where: undefined,
app-1    |   schema: undefined,
app-1    |   table: undefined,
app-1    |   column: undefined,
app-1    |   dataType: undefined,
app-1    |   constraint: undefined,
app-1    |   file: 'parse_relation.c',
app-1    |   line: '1392',
app-1    |   routine: 'parserOpenTable'
app-1    | }
app-1    | ‚ùå Critical error in scheduled generation: error: relation "ai_generation_logs" does not exist
app-1    |     at /app/node_modules/pg-pool/index.js:45:11
app-1    |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
app-1    |     at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
app-1    |     at async DatabaseStorage.createAiGenerationLog (file:///app/dist/index.js:300:20)
app-1    |     at async BlogAutomationService.generateBlogPost (file:///app/dist/index.js:891:7)
app-1    |     at async BlogScheduler.generatePostSafely (file:///app/dist/index.js:1012:22) {
app-1    |   length: 117,
app-1    |   severity: 'ERROR',
app-1    |   code: '42P01',
app-1    |   detail: undefined,
app-1    |   hint: undefined,
app-1    |   position: '13',
app-1    |   internalPosition: undefined,
app-1    |   internalQuery: undefined,
app-1    |   where: undefined,
app-1    |   schema: undefined,
app-1    |   table: undefined,
app-1    |   column: undefined,
app-1    |   dataType: undefined,
app-1    |   constraint: undefined,
app-1    |   file: 'parse_relation.c',
app-1    |   line: '1392',
app-1    |   routine: 'parserOpenTable'
app-1    | }

